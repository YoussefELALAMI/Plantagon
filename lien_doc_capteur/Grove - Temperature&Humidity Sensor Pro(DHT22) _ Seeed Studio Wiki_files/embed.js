(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var r="".concat(document.currentScript.src,"/../../../index.html").split("/").reduce((function(e,t){return"."===t||(".."===t?e.pop():e.push(t)),e}),[]).join("/"),n=function(){try{var e;if(performance&&performance.measure)return null!==(e=performance.measure("name").duration)&&void 0!==e?e:0}catch(e){console.log("Measure initial time duration error",e)}return 0}(),o=function(){var t;function o(){function t(t){var r=[],n=[];t.forEach((function(t){return t.addedNodes.length&r.push.apply(r,e(t.addedNodes))})),t.forEach((function(t){return t.removedNodes.length&n.push.apply(n,e(t.removedNodes))}));var i=r.map((function(e){return e.querySelectorAll&&e.querySelectorAll("div.altium-ecad-viewer")})).filter((function(e){return e&&e.length})).reduce((function(e,t){return t.forEach((function(t){return e.push(t)})),e}),[]);i.length&&setTimeout((function(){return i.forEach((function(e){return o(e)}))}))}function o(e){if(e){var t,o,i=e.attributes.getNamedItem("data-project-src")||e.attributes.getNamedItem("project-src"),a=e.attributes.getNamedItem("data-project-token"),u=e.attributes.getNamedItem("use-border"),s=r+"?ver="+(new Date).getTime();if(i&&i.value||a&&a.value){!e.hasAttribute("data-project-src")&&i&&e.setAttribute("data-project-src",i.value);var c=document.querySelectorAll(".altium-web-viewer");if(Object.values(c)&&Object.values(c).some((function(t){return t.parentElement.dataset&&t.parentElement.dataset.viewerIframeGuid&&t.parentElement.dataset.viewerIframeGuid===e.dataset.viewerIframeGuid})))return;var d=(t=s,(o=document.createElement("iframe")).setAttribute("data-src",t),o.setAttribute("class","lazy altium-web-viewer"),o.setAttribute("style","overflow:hidden; height:100%; width:100%; border: none;"),o.setAttribute("scrolling","no"),o.setAttribute("allowfullscreen","true"),o.setAttribute("onload","window.top.scrollTo(0,0);"),o);d.onload=function(t){return function(e,t){var r=e.target,o=r.parentElement,i={};i.domainOrigin=window.location.href,Array.prototype.slice.call(o.attributes).filter((function(e){return o.hasAttribute(e.name)&&"style"!=e.name})).forEach((function(e){return i[e.name]=e.value}));var a=["","","-","-","-","-","","",""].reduce((function(e,t){return e+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+t})),u={id:a,message:"loadWidget",src:i,duration:n};"https:"===location.protocol?u.scheme="https":u.scheme="http",window.addEventListener("message",(function(e){var r;return(null==e||null===(r=e.data)||void 0===r?void 0:r.id)===a&&t.dispatchEvent(new CustomEvent(e.data.message,{detail:{id:a,data:e.data.data}}))})),r.contentWindow.postMessage(u,"*"),t.dataset.viewerIframeGuid=a,t.postCustomMessage=function(e){return r.contentWindow.postMessage(e,"*")}}(t,e)},e.style.overflow="hidden",e.style.maxWidth="1280px",e.style.maxHeight="700px",e.style.boxSizing="border-box",e.style.height||e.style.width||(e.style.width="100%",e.style.height="100%"),u&&"false"===u.value||(e.style.border="1px solid #E8E8E8",e.style.borderRadius="4px"),e.appendChild(d)}else e.setAttribute("style","display:none; width:0; height:0; border:none;")}}return{initViewer:function(){!function(){var e=window.MutationObserver||window.WebKitMutationObserver;e?new e(t).observe(document.body,{childList:!0,subtree:!0}):window.addEventListener&&(document.body.addEventListener("DOMNodeInserted",t,!1),document.body.addEventListener("DOMNodeRemoved",t,!1))}(),document.querySelectorAll("div.altium-ecad-viewer").forEach((function(e){return o(e)})),u()}}}return{getViewer:function(){return t||(t=o()),t}}}();window.altiumViewerClient=o;var i=o.getViewer();function a(){var e;"true"!==(e=window.location.href,new URL(e).searchParams.get("delayedinit"))&&i.initViewer()}function u(){var e={intersectionObserverSupport:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in window,idleCallbackSupport:"requestIdleCallback"in window,eventsToBind:[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]]},t="lazy",r="lazy-bg",n="img.".concat(t,",video.").concat(t,",iframe.").concat(t,",.").concat(r),o=function(e){return[].slice.call(e)},i=function(e){if("IMG"===e.tagName){var t=e.parentNode;"PICTURE"===t.tagName&&o(t.querySelectorAll("source")).forEach((function(e){return a(e)})),a(e)}"VIDEO"===e.tagName&&(o(e.querySelectorAll("source")).forEach((function(e){return a(e)})),a(e),!0===e.autoplay&&e.load()),"IFRAME"===e.tagName&&a(e),e.classList.contains(r)&&(e.classList.remove(r),e.classList.add("lazy-bg-loaded"))},a=function(e){null!==e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),null!==e.getAttribute("data-src")&&e.setAttribute("src",e.getAttribute("data-src")),null!==e.getAttribute("data-poster")&&e.setAttribute("poster",e.getAttribute("data-poster"))},u=function r(){var n=!1;!1===n&&s.length>0&&(n=!0,setTimeout((function(){s.forEach((function(e){e.getBoundingClientRect().top<=window.innerHeight+200&&e.getBoundingClientRect().bottom>=-200&&"none"!==getComputedStyle(e).display&&(i(e),e.classList.remove(t),s=s.filter((function(t){return t!==e})))})),n=!1,0===s.length&&e.eventsToBind.forEach((function(e){return e[0].removeEventListener(e[1],r)}))}),200))},s=o(document.querySelectorAll(n));if(!0===e.intersectionObserverSupport){var c=new IntersectionObserver((function(e,r){e.forEach((function(e){if(!0===e.isIntersecting||e.intersectionRatio>0){var n=e.target;i(n),n.classList.remove(t),r.unobserve(n),s=s.filter((function(e){return e!==n}))}}))}),{rootMargin:"".concat(200,"px 0%")});s.forEach((function(e){return c.observe(e)}))}else e.eventsToBind.forEach((function(e){return e[0].addEventListener(e[1],u)})),u();e.mutationObserverSupport}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a(),window.eCadViewer=i,window.startViewer=a,window.yallForViewer=u})();