var ezVideoAdConductor;(()=>{"use strict";var t={d:(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{getVideoAdConductor:()=>s});function a(t){"1"===new URLSearchParams(window.location.search).get("ez_conductor_debug")&&console.log(`%c[conductor] ${t}`,"color: #FFD700")}var i=new class{constructor(){this.target=new EventTarget,this.outstreamPlayer=null,this.autoPlayInstreamPlayer=null,this.clickToPlayInstreamPlayer=null,this.addListener("clickToPlayStarted",this.handleClickToPlayStarted.bind(this)),this.addListener("autoPlayStarted",this.handleAutoPlayStarted.bind(this)),this.addListener("clickToPlayEnded",this.handleClickToPlayEnded.bind(this)),this.addListener("clickToPlayPaused",this.handleClickToPlayPaused.bind(this)),this.addListener("autoPlayFloating",this.handleAutoPlayFloating.bind(this)),this.addListener("autoPlayNotFloating",this.handleAutoPlayNotFloating.bind(this)),this.addListener("nonMagicPlayStarted",this.handleNonMagicPlayStarted.bind(this))}setAutoPlayInstreamPlayer(t){this.autoPlayInstreamPlayer=t}setClickToPlayInstreamPlayer(t){this.clickToPlayInstreamPlayer=t}setOutstreamPlayer(t){this.outstreamPlayer=t}addListener(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.target.addEventListener(t,e,a)}addListenerOnce(t,e){this.target.addEventListener(t,e,{once:!0})}removeListener(t,e){this.target.removeEventListener(t,e)}dispatchEvent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((a,i)=>{e.done=a,e.fail=i;const s=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!1});this.target.dispatchEvent(s)}))}handleClickToPlayStarted(t){a("clickToPlayStarted triggered"),this.dispatchEvent("pauseAutoPlay",{}),this.dispatchEvent("pauseOutstream",{}),this.dispatchEvent("pauseNonMagicPlay",{}),t&&t.detail&&t.detail.done&&t.detail.done()}async handleAutoPlayStarted(t){a("autoPlayStarted triggered"),this.dispatchEvent("pauseNonMagicPlay",{}),t&&t.detail&&t.detail.done&&t.detail.done()}handleClickToPlayEnded(t){a("clickToPlayEnded triggered"),this.dispatchEvent("startAutoPlay",{}),this.dispatchEvent("pauseNonMagicPlay",{}),t&&t.detail&&t.detail.done&&t.detail.done()}async handleClickToPlayPaused(t){a("clickToPlayPaused triggered"),await this.dispatchEvent("startAutoPlay"),await this.dispatchEvent("pauseNonMagicPlay"),t&&t.detail&&t.detail.done&&t.detail.done()}async handleAutoPlayFloating(t){a("autoPlayFloating triggered"),"undefined"!==typeof __ezOutstream&&await this.dispatchEvent("pauseOutstream",{}),this.dispatchEvent("startAutoPlay",{}),t&&t.detail&&t.detail.done&&t.detail.done()}async handleAutoPlayNotFloating(t){a("autoPlayNotFloating triggered"),!this.clickToPlayInstreamPlayer||this.clickToPlayInstreamPlayer.paused()?(this.isAutoPlayAdPlaying()||this.startOutstream(),t&&t.detail&&t.detail.done&&t.detail.done()):t&&t.detail&&t.detail.done&&t.detail.done()}instreamReadyToStart(){return new Promise((t=>{a("instreamReadyToStart"),this.isOutstreamAdPlaying()?(a("waiting to start instream ad"),this.addListenerOnce("outstreamAdEnded",t)):t()}))}outstreamReadyToStart(){return new Promise((t=>{a("outstreamReadyToStart"),this.isAutoPlayAdPlaying()?(a("waiting to start outstream ad"),this.addListenerOnce("instreamAdEnded",t)):t()}))}handleInstreamAdResumed(){a("instreamAdResumed"),this.isOutstreamAdPlaying()&&(a("pausing instream ad"),this.autoPlayInstreamPlayer.adRenderer?.pauseAd(),this.addListenerOnce("outstreamAdEnded",(()=>{this.autoPlayInstreamPlayer.adRenderer?.resumeAd()})))}handleInstreamAdEnded(){a("instreamAdEnded"),this.dispatchEvent("instreamAdEnded"),this.startOutstream()}handleOutstreamAdResumed(){a("outstreamAdResumed"),this.isAutoPlayAdPlaying()?(a("pausing outstream ad"),this.dispatchEvent("pauseOutstream"),this.addListenerOnce("instreamAdEnded",(()=>{this.dispatchEvent("startOutstream")}))):window.ezOutstreamPlayer?.RaisePlayer()}handleOutstreamAdEnded(){a("outstreamAdEnded"),this.dispatchEvent("outstreamAdEnded")}handleNonMagicPlayStarted(t){a("nonMagicPlayStarted triggered");let e=t.detail.player;this.dispatchEvent("pauseAutoPlay",{}),this.dispatchEvent("pauseClickToPlay",{}),this.dispatchEvent("pauseNonMagicPlay",{player:e}),this.dispatchEvent("pauseOutstream",{}),t&&t.detail&&t.detail.done&&t.detail.done()}isAutoPlayFloating(){return this.autoPlayInstreamPlayer&&this.autoPlayInstreamPlayer.isCurrentlyFloating()}isAutoPlayAdPlaying(){return this.autoPlayInstreamPlayer&&this.autoPlayInstreamPlayer.isAdInProgress()&&!this.autoPlayInstreamPlayer.isAdPaused()}isAutoPlayFloatingPlayerClosed(){return!!document.querySelector("#ez-video-container-ez-4999.ez-player-closed")}isOutstreamFloatingPlayerClosed(){return!!document.querySelector(".ez-outstream-container.ez-player-closed")}canFloatVideo(){return!this.isAutoPlayFloatingPlayerClosed()&&!this.isOutstreamFloatingPlayerClosed()}isOutstreamAdPlaying(){return this.outstreamPlayer?.isAdInProgress()&&!this.outstreamPlayer?.isAdPaused()}canStartOutstream(){return!this.isAutoPlayAdPlaying()&&!this.isAutoPlayFloating()&&this.canFloatVideo()&&!this.isOutstreamAdPlaying()}async startOutstream(){a("startOutstream triggered"),this.canStartOutstream()&&this.dispatchEvent("startOutstream")}getPlayerById(t){return[this.autoPlayInstreamPlayer,this.clickToPlayInstreamPlayer,this.outstreamPlayer].filter((t=>t)).find((e=>e?.player_id===t))}};function s(){return i}ezVideoAdConductor=e})();